<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Student Portal</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Only ads changes */
    #cardContainer {
      width: 100%;
      height: 300px; /* adjust height */
      overflow: hidden;
      border-radius: 10px;
      position: relative;
    }
    #slideImage {
      width: 100%;
      height: 100%;
      object-fit: cover;
      cursor: pointer;
      display: block;
    }
    .detail-view {
      width: 100%;
      min-height: 100vh;
    }
  </style>
</head>
<body>
  <!-- Login/Register Card -->
  <div class="auth-card">
    <div id="loginPage">
      <h2>Login</h2>
      <label for="loginReg">Registration Number</label>
      <input type="text" id="loginReg" placeholder="Enter Reg No"/>
      <label for="loginPass">Password</label>
      <div class="input-group">
        <input type="password" id="loginPass" placeholder="Enter Password"/>
        <span class="toggle-icon" onclick="togglePassword('loginPass', this)">ğŸ‘ï¸</span>
      </div>
      <button onclick="login()">Login</button>
      <div class="link" onclick="showPage('registerPage')">Not registered? Click here</div>
    </div>

    <!-- Registration Form -->
  <div id="registerPage" class="hidden">
    <h2>Register</h2>

    <label>Full Name</label>
    <input type="text" id="fullName">

    <label>Registration Number</label>
    <input type="text" id="regNumber">

    <label>Email</label>
    <input type="email" id="email">

    <label>Phone Number</label>
    <input type="tel" id="phone">

    <label>Gender</label>
    <select id="gender">
      <option value="">Choose...</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
    </select>

    <label>Date of Birth</label>
    <input type="date" id="dob">

    <label>Create Password</label>
    <div class="input-group">
      <input type="password" id="password">
      <span class="toggle-icon" onclick="togglePassword('password', this)">ğŸ‘ï¸</span>
    </div>

    <label>Repeat Password</label>
    <div class="input-group">
      <input type="password" id="repeatPassword">
      <span class="toggle-icon" onclick="togglePassword('repeatPassword', this)">ğŸ‘ï¸</span>
    </div>

    <button onclick="register()">Submit</button>
    <div class="link" onclick="showPage('loginPage')">Already have an account? Click here</div>
  </div>

</div>

  <!-- Dashboard -->
  <div class="dashboard hidden" id="dashboardPage">
    <div class="container" id="mainContainer">
      <!-- Ads Card -->
      <div class="card" id="cardContainer">
        <img id="slideImage" src="" alt="Sliding Image" />
        <div class="card-content">
          <h3 class="card-title" id="slideTitle"></h3>
          <p class="card-description" id="slideDescription"></p>
        </div>
      </div>
      <div class="indicators" id="indicators"></div>

      <!-- Results -->
      <div class="card">
        <h3>Results</h3>
        <p>Here you will see examination results</p>
        <button onclick="openResults()">Open Results</button>
      </div>

      <!-- Learning Portal -->
      <div class="card">
        <h3>Learning Portal</h3>
        <p>Here you will find notes</p>
        <button onclick="alert('Under development')">Open</button>
      </div>
    </div>

    <!-- Detail View -->
    <div id="detailView" class="detail-view hidden">
      <div id="detailContent"></div>
    </div>
  </div>

  <script>
    const slides = [
      {
        img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/.../Creative%20Modern%20Business%20Card.png",
        title: "HP EliteBook 830 G5",
        description: "Student Offer",
        html: `<h1>HP EliteBook 830 G5</h1><p>Full ad HTML here</p>`
      },
      {
        img: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/.../DELL%20LATITUDE%205410%2010TH%20GEN.png",
        title: "Dell Latitude 5410",
        description: "Student Deal",
        html: `<h1>Dell Latitude 5410</h1><p>Full ad HTML here</p>`
      }
    ];

    const slideImage = document.getElementById("slideImage");
    const slideTitle = document.getElementById("slideTitle");
    const slideDescription = document.getElementById("slideDescription");
    const indicatorsContainer = document.getElementById("indicators");
    const detailView = document.getElementById("detailView");
    const detailContent = document.getElementById("detailContent");
    const mainContainer = document.getElementById("mainContainer");

    let currentIndex = 0;
    let slideInterval;

    // Initialize
    updateSlide();
    slides.forEach((_, index) => {
      const ind = document.createElement("div");
      ind.classList.add("indicator");
      if (index === 0) ind.classList.add("active");
      ind.addEventListener("click", () => {
        currentIndex = index;
        updateSlide();
        resetInterval();
      });
      indicatorsContainer.appendChild(ind);
    });

    function updateSlide() {
      const s = slides[currentIndex];
      slideImage.src = s.img;
      slideTitle.textContent = s.title;
      slideDescription.textContent = s.description;
      document.querySelectorAll(".indicator").forEach((dot, i) => {
        dot.classList.toggle("active", i === currentIndex);
      });
    }

    function nextSlide() {
      currentIndex = (currentIndex + 1) % slides.length;
      updateSlide();
    }

    function resetInterval() {
      clearInterval(slideInterval);
      slideInterval = setInterval(nextSlide, 5000);
    }
    resetInterval();

    // Show ad detail + push state
    slideImage.addEventListener("click", () => {
      mainContainer.style.display = "none";
      detailView.classList.remove("hidden");
      detailContent.innerHTML = slides[currentIndex].html;

      history.pushState({ page: "ad" }, "", "#ad");
    });

    // Handle browser back button
    window.addEventListener("popstate", (event) => {
      if (!event.state || event.state.page !== "ad") {
        detailView.classList.add("hidden");
        mainContainer.style.display = "block";
      }
    });
  </script>

  <script type="module" src="app.js"></script>
</body>
</html>
